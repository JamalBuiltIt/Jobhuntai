{"ast":null,"code":"import React,{useEffect}from\"react\";import{signInWithPopup,GoogleAuthProvider,getRedirectResult,signOut}from\"firebase/auth\";import{auth}from\"./firebase\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const provider=new GoogleAuthProvider();const Login=()=>{const navigate=useNavigate();// Sign out to ensure the user starts from a clean session\nconst signOutUser=async()=>{try{await signOut(auth);}catch(error){console.error(\"Error signing out:\",error);}};const handleLogin=async()=>{try{await signOutUser();// Ensure no active session\nconst result=await signInWithPopup(auth,provider);console.log(\"User signed in:\",result.user);navigate(\"/dashboard\");}catch(error){console.error(\"Login failed:\",error);}};useEffect(()=>{const handleRedirectResult=async()=>{try{const result=await getRedirectResult(auth);if(result!==null&&result!==void 0&&result.user){console.log(\"Redirected User:\",result.user);navigate(\"/dashboard\");}else{console.log(\"No result found.\");}}catch(error){console.error(\"Error in redirect result:\",error);}};handleRedirectResult();},[navigate]);return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\",marginTop:\"50px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogin,children:\"Sign in with Google\"})]});};export default Login;","map":{"version":3,"names":["React","useEffect","signInWithPopup","GoogleAuthProvider","getRedirectResult","signOut","auth","useNavigate","jsx","_jsx","jsxs","_jsxs","provider","Login","navigate","signOutUser","error","console","handleLogin","result","log","user","handleRedirectResult","style","textAlign","marginTop","children","onClick"],"sources":["C:/jobHunt/src/components/login.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { \r\n  signInWithPopup, \r\n  GoogleAuthProvider, \r\n  getRedirectResult, \r\n  signOut \r\n} from \"firebase/auth\";\r\nimport { auth } from \"./firebase\"; \r\nimport { useNavigate } from \"react-router-dom\";  \r\n\r\nconst provider = new GoogleAuthProvider();\r\n\r\nconst Login = () => {\r\n  const navigate = useNavigate(); \r\n\r\n  // Sign out to ensure the user starts from a clean session\r\n  const signOutUser = async () => {\r\n    try {\r\n      await signOut(auth);\r\n    } catch (error) {\r\n      console.error(\"Error signing out:\", error);\r\n    }\r\n  };\r\n\r\n  const handleLogin = async () => {\r\n    try {\r\n      await signOutUser(); // Ensure no active session\r\n      const result = await signInWithPopup(auth, provider);\r\n      console.log(\"User signed in:\", result.user);\r\n      navigate(\"/dashboard\");\r\n    } catch (error) {\r\n      console.error(\"Login failed:\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleRedirectResult = async () => {\r\n      try {\r\n        const result = await getRedirectResult(auth);\r\n        if (result?.user) {\r\n          console.log(\"Redirected User:\", result.user);\r\n          navigate(\"/dashboard\");\r\n        } else {\r\n          console.log(\"No result found.\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error in redirect result:\", error);\r\n      }\r\n    };\r\n    handleRedirectResult();\r\n  }, [navigate]);\r\n\r\n  return (\r\n    <div style={{ textAlign: \"center\", marginTop: \"50px\" }}>\r\n      <h2>Login</h2>\r\n      <button onClick={handleLogin}>Sign in with Google</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OACEC,eAAe,CACfC,kBAAkB,CAClBC,iBAAiB,CACjBC,OAAO,KACF,eAAe,CACtB,OAASC,IAAI,KAAQ,YAAY,CACjC,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAT,kBAAkB,CAAC,CAAC,CAEzC,KAAM,CAAAU,KAAK,CAAGA,CAAA,GAAM,CAClB,KAAM,CAAAC,QAAQ,CAAGP,WAAW,CAAC,CAAC,CAE9B;AACA,KAAM,CAAAQ,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAV,OAAO,CAACC,IAAI,CAAC,CACrB,CAAE,MAAOU,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,oBAAoB,CAAEA,KAAK,CAAC,CAC5C,CACF,CAAC,CAED,KAAM,CAAAE,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAH,WAAW,CAAC,CAAC,CAAE;AACrB,KAAM,CAAAI,MAAM,CAAG,KAAM,CAAAjB,eAAe,CAACI,IAAI,CAAEM,QAAQ,CAAC,CACpDK,OAAO,CAACG,GAAG,CAAC,iBAAiB,CAAED,MAAM,CAACE,IAAI,CAAC,CAC3CP,QAAQ,CAAC,YAAY,CAAC,CACxB,CAAE,MAAOE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,eAAe,CAAEA,KAAK,CAAC,CACvC,CACF,CAAC,CAEDf,SAAS,CAAC,IAAM,CACd,KAAM,CAAAqB,oBAAoB,CAAG,KAAAA,CAAA,GAAY,CACvC,GAAI,CACF,KAAM,CAAAH,MAAM,CAAG,KAAM,CAAAf,iBAAiB,CAACE,IAAI,CAAC,CAC5C,GAAIa,MAAM,SAANA,MAAM,WAANA,MAAM,CAAEE,IAAI,CAAE,CAChBJ,OAAO,CAACG,GAAG,CAAC,kBAAkB,CAAED,MAAM,CAACE,IAAI,CAAC,CAC5CP,QAAQ,CAAC,YAAY,CAAC,CACxB,CAAC,IAAM,CACLG,OAAO,CAACG,GAAG,CAAC,kBAAkB,CAAC,CACjC,CACF,CAAE,MAAOJ,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACnD,CACF,CAAC,CACDM,oBAAoB,CAAC,CAAC,CACxB,CAAC,CAAE,CAACR,QAAQ,CAAC,CAAC,CAEd,mBACEH,KAAA,QAAKY,KAAK,CAAE,CAAEC,SAAS,CAAE,QAAQ,CAAEC,SAAS,CAAE,MAAO,CAAE,CAAAC,QAAA,eACrDjB,IAAA,OAAAiB,QAAA,CAAI,OAAK,CAAI,CAAC,cACdjB,IAAA,WAAQkB,OAAO,CAAET,WAAY,CAAAQ,QAAA,CAAC,qBAAmB,CAAQ,CAAC,EACvD,CAAC,CAEV,CAAC,CAED,cAAe,CAAAb,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}